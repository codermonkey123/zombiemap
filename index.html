 <html>
  <head>
    <style>
        #zombie_map {
            width: 100%;
            height: 100%;
            background-color: grey;
left: 0;
    position: absolute;
    top: 0;
      }
    </style>
    <title>My page title</title>
  </head>
  <body>
  <div id="zombie_map"></div>
  <script>
    var zombie_map;
    var old_position;
    var tolerance = 10;

var data = `51.80973611720411 -2.7235546286181855 Ironman.png
 51.80934989772958 -2.722098034085436 Yoda.png
 51.80863201487606 -2.7208791320410186 CaptainAmerica.png
 51.808768287581266 -2.720373953212969 Batman.png
 51.81202426784301 -2.7266108409434597 Darthvader.png`;

var markers = data.split("\n");

var all_markers = [];




function initMap() {
        zombie_map = new google.maps.Map(document.getElementById('zombie_map'), {
            zoom: 15,
            center: {lat: 51.814201, lng: -2.712920}
        });






if(navigator.geolocation) {
    navigator.geolocation.watchPosition(set_my_position);
}
else {
    alert("Geolocation doesn't work in your browser");
}






for(var i=0; i < markers.length; i++){

            var marker_data = markers[i].trim().split(" ");

   
            var marker_position = new google.maps.LatLng(marker_data[0], marker_data[1]);


            var marker = new google.maps.Marker({
              position: marker_position,
              icon: marker_data[2],
              map: zombie_map
            });

            all_markers.push(marker);
        }

        console.log(all_markers);


old_position = new google.maps.Marker({
            position: {lat: 51.814201, lng: -2.712920},
            map: zombie_map
        })







}




function set_my_position(position){
old_position.setMap(null);
var pos = new google.maps.LatLng(position.coords.latitude, position.coords.longitude);
var marker = new google.maps.Marker({
          position: pos,
          icon: "man.png",
          map: zombie_map
        });
old_position = marker;
for(var i=0; i < all_markers.length; i++){
            var distance = google.maps.geometry.spherical.computeDistanceBetween(pos, all_markers[i].getPosition());
            if( distance < tolerance ){
            var what_is_it = all_markers[i].getIcon();
what_is_it = what_is_it.replace(".png","");

alert("Found the "+what_is_it );

all_markers[i].setMap(null);    



            }
        }


}

</script>
<script async defer
src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBGvkJqx2PKtnO2FFPwK2uRpqJHHXOSQ4g&callback=initMap&libraries=geometry">
</script>
</body>
</html>

