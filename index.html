 <html>
  <head>
    <style>
        #zombie_map {
            	width: 100%;
           	height: 100%;
            	background-color: grey;
		left: 0;
    		position: absolute;
    		top: 0;
     	 }
    </style>
   <title>My page title</title>
  </head>
  
  <body>
  <div id="zombie_map"></div>
  <script>
    var zombie_map;
    var old_position;
    var tolerance = 20;
    var score = 0;
var stage = 0;



var data = `51.81156075781704 -2.724204799740786 Yoda.png
 51.810824477598594 -2.723400137036318 Ironman.png
 51.810353517277434 -2.7229602547578757 CaptainAmerica.png
 51.81001025856986 -2.7228234859842493 Batman.png
51.80946632229852 -2.7224908920664026 Darthvader.png`;

var markers = data.split("\n");

var all_markers = [];




function initMap() {
        zombie_map = new google.maps.Map(document.getElementById('zombie_map'), {
            zoom: 15,
            center: {lat: 51.814201, lng: -2.712920}
        });






if(navigator.geolocation) {
    navigator.geolocation.watchPosition(set_my_position);
}
else {
    alert("Geolocation doesn't work in your browser");
}






for(var i=0; i < markers.length; i++){

            var marker_data = markers[i].trim().split(" ");

   
            var marker_position = new google.maps.LatLng(marker_data[0], marker_data[1]);


            var marker = new google.maps.Marker({
              position: marker_position,
              icon: marker_data[2],
              map: zombie_map
            });

            all_markers.push(marker);
        }

        console.log(all_markers);

all_markers[1].setMap(null);
all_markers[2].setMap(null);
all_markers[3].setMap(null);
all_markers[4].setMap(null);


old_position = new google.maps.Marker({
            position: {lat: 51.814201, lng: -2.712920},
            map: zombie_map
        })







}




function set_my_position(position){
old_position.setMap(null);
var pos = new google.maps.LatLng(position.coords.latitude, position.coords.longitude);
var marker = new google.maps.Marker({
          position: pos,
          icon: "man.png",
          map: zombie_map
        });
old_position = marker;
for(var i=0; i < all_markers.length; i++){
            var distance = google.maps.geometry.spherical.computeDistanceBetween(pos, all_markers[i].getPosition());
            if( distance < tolerance ){
if(stage < i+1) {
            var what_is_it = all_markers[i].getIcon();
	    what_is_it = what_is_it.replace(".png","");
score += 10;
	    
	     all_markers[i].setMap(null);
stage +=1;

all_markers[stage].setMap(zombie_map);



             alert("Found "+what_is_it );

alert("Your current score is "+score );
 	    
}


            }
        }


}

</script>
<script async defer
src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBGvkJqx2PKtnO2FFPwK2uRpqJHHXOSQ4g&callback=initMap&libraries=geometry">
</script>
</body>
</html>

